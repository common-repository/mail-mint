/*! For license information please see automation-editor.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_mmAdmin_webpackJsonp=globalThis.webpackChunk_mmAdmin_webpackJsonp||[]).push([[7352],{2458:(t,e,r)=>{r.r(e),r.d(e,{default:()=>Be});var n=r(6427),o=r(9374),i=r(3031),a=r(6942),s=r.n(a),l=r(7143),c=r(5699),u=r(6087),d=r(7723),m=r(1609),p=r(9185),f=r(9641),v=r(6929),h=r(4848);function y(){return(0,h.jsx)("svg",{width:"24",height:"26",fill:"none",viewBox:"0 0 24 26",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{fill:"#02C4FB",stroke:"#02C4FB",strokeWidth:".3",d:"M22.103 16.373l-9.125-7.377a2.757 2.757 0 00-2.931-.33c-.47.229-.86.586-1.127 1.027-.265.442-.395.95-.372 1.462l.573 11.54c.02.498.2.976.512 1.37.311.392.74.68 1.228.823a2.496 2.496 0 001.845-.144c.34-.168.637-.41.865-.71l1.975-2.56a2.156 2.156 0 011.7-.825h3.278a2.505 2.505 0 001.423-.437c.417-.285.733-.69.906-1.159.173-.469.194-.978.06-1.459a2.412 2.412 0 00-.81-1.226v.005zm-1.022 2.054a.559.559 0 01-.214.28.577.577 0 01-.343.1h-3.278a4.107 4.107 0 00-1.788.413c-.556.27-1.04.663-1.417 1.147l-1.975 2.559a.584.584 0 01-.65.203.563.563 0 01-.293-.192.544.544 0 01-.12-.326l-.571-11.54a.77.77 0 01.109-.441.793.793 0 01.34-.308.83.83 0 01.896.099l9.125 7.382a.535.535 0 01.179.624zM8.545 4.385V1.923c0-.245.1-.48.276-.653a.953.953 0 011.333 0 .914.914 0 01.277.653v2.462c0 .245-.1.48-.277.653a.953.953 0 01-1.333 0 .914.914 0 01-.276-.653zm-2.32 2.492a.93.93 0 01-.346.346.944.944 0 01-.936.003L2.428 5.852a.939.939 0 01-.463-.553.905.905 0 01.081-.712.929.929 0 01.575-.44.962.962 0 01.725.093L5.86 5.616a.938.938 0 01.45.556.905.905 0 01-.085.705zm-.923 3.25c.112.22.13.473.051.705a.93.93 0 01-.473.534l-2.515 1.23a.956.956 0 01-1.007-.102.906.906 0 01-.27-1.116.933.933 0 01.434-.433l2.514-1.231a.959.959 0 011.04.128c.094.08.17.177.226.286zm8.371-4.099a.906.906 0 01-.05-.704.93.93 0 01.473-.534l2.514-1.23a.961.961 0 01.717-.046c.235.078.43.244.541.462.111.218.13.47.052.701a.929.929 0 01-.468.534l-2.514 1.231a.96.96 0 01-.917-.041.934.934 0 01-.348-.373z"})})}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const j=(0,u.memo)((function(t){var e,r=t.step,o=(0,u.createContext)(n.__unstableUseCompositeState),i=(0,m.useContext)(o),a=(0,l.useDispatch)(f.Hz).setInserterPopover;return(0,h.jsxs)(n.__unstableCompositeItem,w(w({},i()),{},{role:"treeitem",className:"mrm-automation-add-trigger","data-previous-step-id":r.id,focusable:!0,onClick:function(t){t.stopPropagation(),a({anchor:t.target.closest("button"),type:"trigger"})},children:[(0,h.jsx)(y,{}),null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.SelectAStartingPoint]}))}));var x=r(4504),S=r(5747);function k(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:(0,h.jsx)("path",{d:"M0.827527 6.59406L5.98735 11.7537C6.31557 12.0821 6.84774 12.0821 7.1758 11.7537C7.5039 11.4256 7.5039 10.8935 7.1758 10.5654L2.61016 5.99991L7.17567 1.43457C7.50377 1.10635 7.50377 0.574263 7.17567 0.24617C6.84758 -0.0820565 6.31544 -0.0820565 5.98721 0.24617L0.827394 5.4059C0.663347 5.57002 0.581416 5.7849 0.581416 5.99989C0.581416 6.21498 0.663507 6.43002 0.827527 6.59406Z",fill:"#2D3149"})})}const M=(0,m.memo)(k);function O(){return(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:[(0,h.jsx)("g",{clipPath:"url(#clip0_6439_3276)",children:(0,h.jsx)("path",{d:"M9.17247 6.59406L4.01265 11.7537C3.68443 12.0821 3.15226 12.0821 2.8242 11.7537C2.4961 11.4256 2.4961 10.8935 2.8242 10.5654L7.38984 5.99991L2.82433 1.43457C2.49623 1.10635 2.49623 0.574263 2.82433 0.24617C3.15242 -0.0820566 3.68456 -0.0820566 4.01279 0.24617L9.17261 5.4059C9.33665 5.57002 9.41858 5.7849 9.41858 5.99989C9.41858 6.21498 9.33649 6.43002 9.17247 6.59406Z",fill:"#2D3149"})}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_6439_3276",children:(0,h.jsx)("rect",{width:"12",height:"12",fill:"white"})})})]})}const P=(0,m.memo)(O),L=function(t){var e=t.children,r=(0,u.createContext)(n.__unstableUseCompositeState),o=(0,n.__unstableUseCompositeState)({shift:!0,wrap:"horizontal"});return(0,h.jsx)(r.Provider,{value:o,children:e})};m.ComponentType;var N=r(8558);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}var A=["isFirst","children"];function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var R=(0,u.forwardRef)((function(t,e){var r=t.isFirst,o=t.children,i=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,A),a=(0,u.createContext)(n.__unstableUseCompositeState),s=(0,u.useContext)(a);return(0,h.jsx)(n.__unstableCompositeItem,z(z(z({ref:e,role:"option",focusable:!0},i),s()),{},{children:function(t){var e=z(z({},t),{},{tabIndex:r?0:t.tabIndex});return(0,h.jsx)(n.Button,z(z({},e),{},{children:o}))}}))}));function D(t){var e=t.icon;return(0,h.jsx)("span",{className:"block-editor-block-icon",children:(0,h.jsx)(n.Icon,{icon:e})})}var V=r(5270);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}var H=["className","isFirst","item","onSelect","onHover","isDraggable","activeCategory","type"];function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){U(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function U(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var G=function(){var t=window.navigator.platform;return-1!==t.indexOf("Mac")||["iPad","iPhone"].includes(t)},W=(0,u.memo)((function(t){var e=t.className,r=t.isFirst,n=t.item,o=t.onSelect,i=t.onHover,a=(t.isDraggable,t.activeCategory),l=(t.type,function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,H)),c=(0,u.useRef)(!0);return"pro"!==n.package||window.MRM_Vars.is_mailmint_pro_license_active,(0,h.jsx)(h.Fragment,{children:(null==n?void 0:n.category)==a&&(0,h.jsx)("div",{className:"block-editor-block-types-list__list-item ".concat("triggers"===(null==n?void 0:n.group)?"trigger-items":""),children:(0,h.jsxs)(R,B(B({isFirst:r,className:s()("block-editor-block-types-list__item ",e),onClick:function(t){t.preventDefault(),o(n,G()?t.metaKey:t.ctrlKey),i(null)},onKeyDown:function(t){t.keyCode===N.ENTER&&(t.preventDefault(),o(n,G()?t.metaKey:t.ctrlKey),i(null))},onFocus:function(){c.current||i(n)},onMouseEnter:function(){c.current||i(n)},onMouseLeave:function(){return i(null)},onBlur:function(){return i(null)}},l),{},{children:["pro"===n.package&&!window.MRM_Vars.is_mailmint_pro_license_active&&(0,h.jsx)("span",{className:"pro-tag-with-icon",children:(0,h.jsx)(V.A,{})}),(0,h.jsx)("span",{className:"block-editor-block-types-list__item-icon",children:(0,h.jsx)(D,{icon:n.icon})}),(0,h.jsx)("span",{className:"block-editor-block-types-list__item-title",children:n.title})]}))})})})),q=r(195);function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Z=(0,u.forwardRef)((function(t,e){var r,n,o=(r=(0,u.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(r,n)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return(0,u.useEffect)((function(){var t;i&&(0,q.speak)(null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.MoveStepDirectionMsg)}),[i]),(0,h.jsx)("div",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({ref:e,role:"listbox","aria-orientation":"horizontal",onFocus:function(){a(!0)},onBlur:function(t){!t.currentTarget.contains(t.relatedTarget)&&a(!1)}},t))}));function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(r),!0).forEach((function(e){et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function et(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=X(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rt=(0,u.forwardRef)((function(t,e){var r=(0,u.createContext)(n.__unstableUseCompositeState),o=(0,u.useContext)(r);return(0,h.jsx)(n.__unstableCompositeGroup,tt(tt({role:"presentation",ref:e},t),o()))})),nt=function(t,e){for(var r=[],n=0,o=t.length;n<o;n+=e)r.push(t.slice(n,n+e));return r};const ot=(0,u.memo)((function(t){var e=t.items,r=void 0===e?[]:e,n=t.onSelect,o=t.onHover,i=void 0===o?function(){}:o,a=t.children,s=t.label,l=t.isDraggable,c=void 0===l||l,u=t.activeCategory,d=t.type;return(0,h.jsxs)(Z,{className:"block-editor-block-types-list","aria-label":s,children:[nt(r,20).map((function(t,e){return(0,h.jsx)(rt,{children:t.map((function(t,r){return(0,h.jsx)(W,{item:t,className:(o=t.key,"editor-block-list-item-".concat(o.replace(/\//,"-"))),onSelect:n,onHover:i,isDraggable:c,isFirst:0===e&&0===r,activeCategory:u,type:d},t.key);var o}))},e)})),a]})}));function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function st(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){lt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=it(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==it(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ut(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var dt=(0,u.forwardRef)((function(t,e){t.onInsert;var r,o,i=ct((0,u.useState)("mailmint"),2),a=i[0],s=i[1],c=(0,l.useSelect)((function(t){return{steps:t(f.Hz).getSteps(),type:t(f.Hz).getInserterPopover().type,automationData:t(f.Hz).getAutomationData(),selectedStep:t(f.Hz).getSelectedStep(),inserterPopover:t(f.Hz).getInserterPopover(),emailConditions:t(f.Hz).getEmailConditions(),ctaProModalDisplay:t(f.Hz).getCtaProModalDisplay(),ctaProModalIcon:t(f.Hz).getCtaProModalIcon(),ctaProModalTitle:t(f.Hz).getCtaProModalTitle(),ctaProModalText:t(f.Hz).getCtaProModalText(),ctaProModalLink:t(f.Hz).getCtaProModalLink(),ctaProModalFeature:t(f.Hz).getCtaProModalFeature()}}),[]),p=c.steps,v=c.type,y=c.automationData,g=(c.selectedStep,c.inserterPopover),b=(c.ctaProModalDisplay,c.ctaProModalIcon,c.ctaProModalTitle,c.ctaProModalText,c.ctaProModalLink,c.ctaProModalFeature,(0,l.useDispatch)(f.Hz)),w=b.setInserterPopover,_=b.selectStep,j=b.setAutomationTriggerName,k=b.openSidebar,O=b.setMaybeSave,N=b.closeSidebar,C=b.setCtaProModal,A=(0,l.useDispatch)(f.Hz),E=A.addStep,z=A.addLogicalStep,I=ct((0,u.useState)(null),2),R=I[0],D=I[1],V=ct((0,u.useState)(""),2),T=V[0],H=V[1],F=(0,u.useMemo)((function(){return"trigger"===v?[{type:"trigger",title:(0,d._x)("Triggers","automation steps","mrm"),label:(0,d._x)("Triggers","automation steps","mrm"),items:p.filter((function(t){return"triggers"===t.group}))}]:[{type:"actions",title:(0,d._x)("Actions","automation steps","mrm"),label:(0,d._x)("Actions","automation steps","mrm"),items:p.filter((function(t){return"actions"===t.group}))},{type:"logical",title:(0,d._x)("Logical","automation steps","mrm"),label:(0,d._x)("Logical","automation steps","mrm"),items:p.filter((function(t){return"logical"===t.group}))}]}),[p,v]),B=(0,u.useCallback)((function(t){D(t)}),[D]),U=(0,u.useRef)(),G=["wc_order_created","edd_complete_purchase","wc_order_completed","wc_abandoned_cart","wc_review_received","wc_price_dropped","wcs_subscription_created","wcs_subscription_trial_end","wcw_user_adds_product"],W=(0,u.useMemo)((function(){return F.map((function(t){return st(st({},t),{},{items:(e=T,r=t.items,r.filter((function(t){return t.title.toLowerCase().includes(e.trim().toLowerCase())})))});var e,r}))}),[T,F]),q=null===(r=window.MRM_Vars)||void 0===r?void 0:r.time_format,K=null===(o=window.MRM_Vars)||void 0===o?void 0:o.gmt_offset,J=new Date,Y=new Date(J.getTime()+60*K*60*1e3).toUTCString(),$=new Date(Y).toLocaleString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"numeric",day:"numeric",hour12:"H:i"!==q,timeZone:"UTC"}),Z=(0,u.useCallback)((function(t){var e,r,n,o,i,a,s,l,c,u={step_id:(Math.random()+1).toString(36).substring(7),key:t.key,type:t.type,settings:{},next_step_id:{},popover_type:v};"logical"===t.type&&"condition"===t.key&&(u={step_id:(Math.random()+1).toString(36).substring(7),key:t.key,type:t.type,settings:{},popover_type:v,next_step_id:{},logical_next_step_id:{yes:"",no:""},node_data:{yes:[],no:[]}}),O(!1),"action"===t.type&&"delay"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{delay_settings:{delay:1,unit:"minutes"}})})),"action"===t.type&&"specificTimeDelay"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{specific_delay_settings:{time:$}})})),"action"==t.type&&"sendMail"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{message_data:{subject:(0,d.__)("Welcome email from mint","mrm"),sender_email:null===(i=window.MRM_Vars)||void 0===i?void 0:i.email_settings.from_email,sender_name:null===(a=window.MRM_Vars)||void 0===a?void 0:a.email_settings.from_name,reply_name:null===(s=window.MRM_Vars)||void 0===s?void 0:s.email_settings.reply_name,reply_email:null===(l=window.MRM_Vars)||void 0===l?void 0:l.email_settings.reply_email,email_preview_text:"",body:"",json_body:""}})})),"action"==t.type&&"addTag"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{tag_settings:{tags:[]}})})),"action"==t.type&&"removeTag"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{tag_settings:{tags:[]}})})),"action"==t.type&&"sequence"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{sequence_settings:{id:"",title:""}})})),"trigger"==t.type&&"wc_order_status_changed"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"edd_update_payment_status"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"edd_recurring_update_subscription"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"mint_list_applied"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{list_applied:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_list_removed"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{list_removed:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_tag_applied"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{tag_applied:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_tag_removed"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{tag_removed:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_anniversary_reminder"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{anniversary:{attribute:{action:"",param:"",name:"",condition_label:"",condition_value:"",value:""},time_to_check:window.MRM_Vars.local_time}})})),"trigger"==t.type&&"tutor_enrol_status_change"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"wp_post_publish"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{post_settings:{criteria:"any",lists:[],segments:[],tags:[],post_tags:[],post_categories:[],post_authors:[],post_types:[{label:"Posts",value:"post"}]}})})),"trigger"==t.type&&"bricks_form_submit"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{bricks_form_settings:{form_id:"",mapping:[],status:"subscribed"}})})),"trigger"===t.type&&G.includes(t.key)&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{product_settings:{option_type:"choose-all",products:[],category:[]}})})),"trigger"===t.type&&"wcs_subscription_status_changed"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{product_settings:{option_type:"choose-all",products:[],category:[],status_from:"wc-any",status_to:"wc-any"}})})),"trigger"!==t.type||"wcs_subscription_before_renewal"!==t.key&&"wcs_subscription_before_end"!==t.key||(u=st(st({},u),{},{settings:st(st({},u.settings),{},{product_settings:{option_type:"choose-all",products:[],category:[],time_to_check:window.MRM_Vars.local_time,days_before:7}})})),"trigger"===t.type&&"wcm_membership_status_changed"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{membership_settings:{status_from:"any",status_to:"any",plans:[]}})})),"action"==t.type&&"createUser"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{contact_status_settings:{status:""}})})),"action"==t.type&&"addList"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{list_settings:{lists:[]}})})),"action"==t.type&&"removeList"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{list_settings:{lists:[]}})})),"action"==t.type&&"webHookOutgoing"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{message_data:{method:"post",remote_url:"",data_format:"json",body_request:"raw",body_request_data:[{body_key:"",body_value:""}],header_request:"no_header",header_request_data:[{header_key:"",header_value:""}]}})})),"logical"==t.type&&"condition"===t.key&&(u=st(st({},u),{},{settings:{rules:{condition:[[{action:"",param:"",name:"",condition_label:"",condition_value:"",value:"",segmentValue:[]}]]}}})),"action"==t.type&&"twilioSendMessage"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{twilio_data:{phone_number:"{{contact.phone_number}}",message_body:"",method:"sms",from_number:null===(c=window.MRM_Vars)||void 0===c||null===(c=c.twilio_settings)||void 0===c?void 0:c.from_number}})})),"action"==t.type&&"addOrderNote"===t.key&&(u=st(st({},u),{},{settings:st(st({},u.settings),{},{order_note:{body:"",type:"private"}})}));var m,p=(0,h.jsx)(x.A,{});"pro"!==t.package||window.MRM_Vars.is_mailmint_pro_license_active?("condition"===v?z(u):E(u),k(f.gl),w(void 0)):(N(),C(!0,p,null===(m=window)||void 0===m||null===(m=m.MRM_Vars)||void 0===m||null===(m=m.mint_trans)||void 0===m?void 0:m.UnlockWithPremium,(0,d.__)("Get Instant Access To Exclusive Features With The Pro Version.","mrm"),S.wp,""),w(void 0));var b=null!==(e=null==y?void 0:y.steps)&&void 0!==e?e:[],M=null==g||null===(r=g.anchor)||void 0===r?void 0:r.getAttribute("data-previous-step-id"),P=null==g||null===(n=g.anchor)||void 0===n?void 0:n.getAttribute("data-condition-type"),L=null==g||null===(o=g.anchor)||void 0===o?void 0:o.getAttribute("data-condition-step-id");if(""!==M){var A=b[parseInt(M)+1];if(_(A,parseInt(M)+1),null!==P){var I=b[parseInt(M)];if("condition"===I.key)if(null===L){var R=I.node_data[P][0];_(R,parseInt(M),P,0)}else{var D=I.node_data[P][parseInt(L)+1];_(D,parseInt(M),P,parseInt(L)+1)}}}else if("trigger"===t.type){var V=b[0];_(V,0)}else{var T=b[b.length-1];_(T,b.length-1)}"trigger"===t.type&&j(t.key)}),[]),X=(0,u.useRef)(null),Q=ct((0,u.useState)(!1),2),tt=Q[0],et=Q[1],rt=ct((0,u.useState)(0),2),nt=rt[0],it=rt[1],at=function(t){s(t);var e=X.current;it(e.scrollLeft)},lt=function(){var t=X.current,e=t.scrollLeft+=200;t.scrollLeft+=200,e>=0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"),t.clientWidth+t.scrollLeft+200>=t.scrollWidth?document.querySelector(".right-arrow-container").classList.remove("active"):document.querySelector(".right-arrow-container").classList.add("active")},ut=function(){var t=X.current,e=t.scrollLeft-=200;t.scrollLeft-=200,e>0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"),document.querySelector(".right-arrow-container").classList.add("active")};(0,m.useEffect)((function(){var t=X.current;if(t){var e=t.clientWidth;t.scrollWidth-e>0&&et(!0)}}),[X,nt]),(0,m.useEffect)((function(){var t=X.current;t&&(t.scrollLeft=nt,t.offsetWidth===t.scrollWidth-nt&&document.querySelector(".right-arrow-container").classList.remove("active"),nt>0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"))}),[a]);var dt,mt,pt,ft=function(){var t=X.current,e=t.offsetWidth,r=t.scrollWidth;t.scrollLeft>0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"),e===r-t.scrollLeft?document.querySelector(".right-arrow-container").classList.remove("active"):document.querySelector(".right-arrow-container").classList.add("active")};function vt(t){pt=!0,dt=t.pageX-X.current.offsetLeft,mt=X.current.scrollLeft}function ht(){pt=!1}function yt(){pt=!1}function gt(t){if(pt){t.preventDefault();var e=t.pageX-X.current.offsetLeft-dt;X.current.scrollLeft=mt-e}}var bt=(0,u.useMemo)((function(){var t=W.find((function(t){return"actions"===(null==t?void 0:t.type)})),e={mailmint:0,"mint-wordpress":0,"mint-woocommerce":0,"mint-woocommerce-subscription":0,"mint-woocommerce-membership":0,"mint-woocommerce-wishlist":0,edd:0,"mint-tutor-lms":0,"mint-fluent-form":0,"mint-contact-form":0,"mint-learndash":0,"mint-memberpress":0,"mint-gravity-form":0,"mint-jet-form":0,"mint-twilio":0,"mint-send-data":0,"mint-lifterlms":0,"mint-bricks-form":0};return t&&null!=t&&t.items&&t.items.forEach((function(t){e.hasOwnProperty(t.category)&&e[t.category]++})),e}),[]);return(0,h.jsx)("div",{className:"block-editor-inserter__menu",children:(0,h.jsx)("div",{className:"block-editor-inserter__main-area",children:(0,h.jsxs)("div",{className:"block-editor-inserter__content",children:[(0,h.jsx)(n.SearchControl,{className:"block-editor-inserter__search",onChange:function(t){R&&D(null),H(t)},value:T,label:(0,d.__)("Search for automation steps","mrm"),placeholder:(0,d.__)("Search","mrm"),ref:U}),(0,h.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,h.jsx)(L,{children:W.map((function(t){var e;return t.items.length>0&&(0,h.jsx)("div",{className:"".concat("logical"==t.type&&"condition"==v?"":t.type,"-group"),children:(0,h.jsxs)("div",{className:"block-editor-inserter__panel-content",children:[(0,h.jsx)("div",{className:"scrollbar-tab-container",children:("trigger"==t.type||"actions"==t.type)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"left-arrow-container",children:[(0,h.jsx)("span",{className:"right-arrow-gradient left-arrow-gradient"}),(0,h.jsx)("div",{className:"left-arrow",onClick:ut,children:(0,h.jsx)(M,{})})]}),(0,h.jsxs)("ul",{className:"trigger-tab-nav",ref:X,onScroll:ft,onMouseDown:vt,onMouseUp:ht,onMouseLeave:yt,onMouseMove:gt,children:[("trigger"==t.type||0!=bt.mailmint)&&(0,h.jsx)("li",{className:"mailmint"===a?"active":"",onClick:function(){return at("mailmint")},children:(0,d._x)("Mail Mint","plugin name","mrm")}),"trigger"!==t.type&&"condition"!==(null==g?void 0:g.type)&&(0,h.jsx)("li",{className:"logical"===a?"active":"",onClick:function(){return at("logical")},children:(0,d._x)("Condition","plugin name","mrm")}),("trigger"==t.type||0!=bt["mint-wordpress"])&&(0,h.jsx)("li",{className:"mint-wordpress"===a?"active":"",onClick:function(){return at("mint-wordpress")},children:(0,d._x)("WordPress","plugin name","mrm")}),window.MRM_Vars.is_wc_active&&("trigger"==t.type||0!=bt["mint-woocommerce"])&&(0,h.jsx)("li",{className:"mint-woocommerce"===a?"active":"",onClick:function(){return at("mint-woocommerce")},children:(0,d._x)("WooCommerce","plugin name","mrm")}),window.MRM_Vars.is_wcs_active&&("trigger"==t.type||0!=bt["mint-woocommerce-subscription"])&&(0,h.jsx)("li",{className:"mint-woocommerce-subscription"===a?"active":"",onClick:function(){return at("mint-woocommerce-subscription")},children:"WooCommerce Subscriptions"}),window.MRM_Vars.is_wcm_active&&("trigger"==t.type||0!=bt["mint-woocommerce-membership"])&&(0,h.jsx)("li",{className:"mint-woocommerce-membership"===a?"active":"",onClick:function(){return at("mint-woocommerce-membership")},children:"WooCommerce Memberships"}),window.MRM_Vars.is_wcw_active&&("trigger"==t.type||0!=bt["mint-woocommerce-wishlist"])&&(0,h.jsx)("li",{className:"mint-woocommerce-wishlist"===a?"active":"",onClick:function(){return at("mint-woocommerce-wishlist")},children:"WooCommerce Wishlists"}),window.MRM_Vars.is_edd_active&&("trigger"==t.type||0!=bt.edd)&&(0,h.jsx)("li",{className:"edd"===a?"active":"",onClick:function(){return at("edd")},children:(0,d._x)("EDD","plugin name","mrm")}),window.MRM_Vars.is_tutor_active&&("trigger"==t.type||0!=bt["mint-tutor-lms"])&&(0,h.jsx)("li",{className:"mint-tutor-lms"===a?"active":"",onClick:function(){return at("mint-tutor-lms")},children:(0,d._x)("Tutor LMS","plugin name","mrm")}),window.MRM_Vars.is_gform_active&&("trigger"==t.type||0!=bt["mint-gravity-form"])&&(0,h.jsx)("li",{className:"mint-gravity-form"===a?"active":"",onClick:function(){return at("mint-gravity-form")},children:(0,d._x)("Gravity Form","plugin name","mrm")}),window.MRM_Vars.is_jetform_active&&("trigger"==t.type||0!=bt["mint-jet-form"])&&(0,h.jsx)("li",{className:"mint-jet-form"===a?"active":"",onClick:function(){return at("mint-jet-form")},children:(0,d._x)("Jet Form","plugin name","mrm")}),window.MRM_Vars.is_fluentform_active&&("trigger"==t.type||0!=bt["mint-fluent-form"])&&(0,h.jsx)("li",{className:"mint-fluent-form"===a?"active":"",onClick:function(){return at("mint-fluent-form")},children:(0,d._x)("Fluent Forms","plugin name","mrm")}),window.MRM_Vars.is_contact_form_active&&("trigger"==t.type||0!=bt["mint-contact-form"])&&(0,h.jsx)("li",{className:"mint-contact-form"===a?"active":"",onClick:function(){return at("mint-contact-form")},children:(0,d._x)("Contact Form 7","plugin name","mrm")}),window.MRM_Vars.is_bricks_active&&("trigger"==t.type||0!=bt["mint-bricks-form"])&&(0,h.jsx)("li",{className:"mint-bricks-form"===a?"active":"",onClick:function(){return at("mint-bricks-form")},children:"Bricks"}),window.MRM_Vars.is_learndash_active&&("trigger"==t.type||0!=bt["mint-learndash"])&&(0,h.jsx)("li",{className:"mint-learndash"===a?"active":"",onClick:function(){return at("mint-learndash")},children:(0,d._x)("LearnDash","plugin name","mrm")}),window.MRM_Vars.is_memberpress_active&&("trigger"==t.type||0!=bt["mint-memberpress"])&&(0,h.jsx)("li",{className:"mint-memberpress"===a?"active":"",onClick:function(){return at("mint-memberpress")},children:"MemberPress"}),(null===(e=window.MRM_Vars)||void 0===e||null===(e=e.twilio_settings)||void 0===e?void 0:e.is_integrated)&&0!=bt["mint-twilio"]&&(0,h.jsx)("li",{className:"mint-twilio"===a?"active":"",onClick:function(){return at("mint-twilio")},children:"Twilio"}),"actions"==t.type&&0!=bt["mint-send-data"]&&(0,h.jsx)("li",{className:"mint-send-data"===a?"active":"",onClick:function(){return at("mint-send-data")},children:"Send Data"}),window.MRM_Vars.is_lifterlms_active&&("trigger"==t.type||0!=bt["mint-lifterlms"])&&(0,h.jsx)("li",{className:"mint-lifterlms"===a?"active":"",onClick:function(){return at("mint-lifterlms")},children:"LifterLMS"})]}),(0,h.jsxs)("div",{className:"right-arrow-container ".concat(tt?"active":""),children:[(0,h.jsx)("span",{className:"right-arrow-gradient"}),(0,h.jsx)("div",{className:"right-arrow  arrow-active}",onClick:lt,children:(0,h.jsx)(P,{})})]})]})}),(0,h.jsx)(ot,{items:t.items,onHover:B,onSelect:function(t){return Z(t)},label:t.label,activeCategory:a,type:v})]})},t.type)}))})})]})})})}));function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function pt(){var t,e,r=(0,m.useRef)(),o=(t=(0,m.useState)(!1),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return mt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s=(0,l.useSelect)((function(t){return{inserterPopover:t(f.Hz).getInserterPopover()}}),[]).inserterPopover,c=(0,l.useDispatch)(f.Hz).setInserterPopover,u=(0,m.useCallback)((function(t){a(!1)}),[]);return s?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(n.Popover,{className:"mintmrm-automaiton__block-popover",ref:r,anchorRect:s.anchor.getBoundingClientRect(),onClose:function(){i||c(void 0)},children:(0,h.jsx)(dt,{onInsert:u})})}):null}var ft=r(5170);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(r),!0).forEach((function(e){gt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=vt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bt(t){var e=t.onClick,r=t.previousStepId,o=t.condition,i=t.logicalStepId,a=(0,u.createContext)(n.__unstableUseCompositeState),s=(0,m.useContext)(a);return(0,h.jsx)(n.__unstableCompositeItem,yt(yt({},s()),{},{role:"treeitem",className:"mintmrm-automation__add-step-button",focusable:!0,"data-previous-step-id":r,"data-condition-type":o,"data-condition-step-id":i,onClick:function(t){t.stopPropagation();var r=t.target.closest("button");e(r)},children:(0,h.jsx)(ft.A,{})}))}const wt=(0,u.memo)((function(t){var e=t.previousStepId,r=(0,l.dispatch)(f.Hz).setInserterPopover;return(0,h.jsx)("div",{className:"mintmrm-automation-step__separator",children:(0,h.jsx)(bt,{onClick:function(t){return r({anchor:t,type:"steps"})},previousStepId:e})})}));var _t=r(4983);function jt(t){return t.icon}function xt(){return(0,h.jsx)("svg",{width:"14",height:"15",fill:"none",viewBox:"0 0 14 15",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{stroke:"#A4A8B5",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7.09 6.34a1.061 1.061 0 00-.193 0 2.578 2.578 0 01-2.49-2.583c0-1.43 1.154-2.59 2.59-2.59A2.587 2.587 0 017.09 6.34zM4.176 9.368c-1.412.945-1.412 2.485 0 3.425 1.604 1.073 4.235 1.073 5.84 0 1.41-.945 1.41-2.486 0-3.425-1.6-1.067-4.23-1.067-5.84 0z"})})}function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(r),!0).forEach((function(e){Ot(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ot(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Pt=(0,u.memo)((function(t){var e,r=t.step,o=t.isSelected,i=t.stepIndex,a=t.condition,c=t.conditionIndex,p=(0,l.useSelect)((function(t){return{stepType:t(f.Hz).getStepType(r.key),error:t(f.Hz).getStepError(r.id),showAnalyticsStat:t(f.Hz).getAnalyticsStat()}}),[r]),v=p.stepType,y=(p.error,p.showAnalyticsStat),g=(0,u.createContext)(n.__unstableUseCompositeState),b=(0,m.useContext)(g),w=(0,l.useRegistry)().batch,_=(0,l.useDispatch)(f.Hz),j=_.openSidebar,x=_.selectStep,S=_.deleteStep,k=_.setMaybeSave,M=_.deleteConditionalStep;e=null!=a&&null!=c?"step-".concat(i,"-").concat(a,"-").concat(c):"step-".concat(i);var O=null!=v?v:function(t){var e="trigger"===t.type;return{title:e?(0,d.__)("Unknown trigger","mrm"):(0,d.__)("Unknown step","mrm"),subtitle:function(){return e?(0,d.__)("Trigger type not registered","mrm"):(0,d.__)("Step type not registered","mrm")},description:e?(0,d.__)("Unknown trigger","mrm"):(0,d.__)("Unknown step","mrm"),group:"trigger"===t.type?"trigger":"actions",key:t.key,foreground:"#8c8f94",background:"#dcdcde",edit:function(){return null},icon:function(){return jt}}}(r),P="Not set up yet."==O.subtitle(r)?"":"subtitle-changed";return(0,h.jsx)("div",{className:"mintmrm-automation__add-step-wrapper step-type-".concat(r.type),children:(0,h.jsxs)("div",{className:"step-btn-wrapper",children:[(0,m.createElement)(n.__unstableCompositeItem,Mt(Mt({},b()),{},{role:"treeitem",className:s()({"mintmrm-automation__editor-step":!0,"is-selected-step":o,"is-unknown-step":!v}),id:e,key:r.id,focusable:!0,onClick:function(){return w((function(){j(f.gl),x(r,i,a,c)}))}}),(0,h.jsx)("div",{className:"mintmrm-automation__editor-step-icon",children:(0,h.jsx)("span",{className:"".concat(O.key," icon"),children:O.icon()})}),(0,h.jsxs)("div",{className:"step-title-area",children:[(0,h.jsx)("label",{htmlFor:e,className:"mintmrm-automation__editor-step-title",children:"trigger"!==r.type?O.title:(0,d._x)("Trigger","noun","mrm")}),(0,h.jsx)("div",{className:"mintmrm-automation__editor-step-subtitle ".concat(P),children:"trigger"!==r.type?O.subtitle(r):O.title}),"trigger"==r.type&&(0,h.jsx)("div",{className:"mintmrm-automation__editor-step-trigger-subtitle ".concat(P),children:O.subtitle(r)})]}),y&&(0,h.jsxs)("div",{className:"step-stats",children:[(0,h.jsxs)("span",{className:"single-stats user",children:[(0,h.jsx)(xt,{}),null==r?void 0:r.enterance]}),(0,h.jsxs)("span",{className:"single-stats converion-rate",children:[!0===isNaN((null==r?void 0:r.completed)/(null==r?void 0:r.enterance)*100)?0:((null==r?void 0:r.completed)/(null==r?void 0:r.enterance)*100).toPrecision(3),"%"]})]})),(0,h.jsx)("div",{className:"mintmrm-automation__editor-step-delete",title:"Delete",onClick:function(){return function(t,e,r){null!=e&&null!=r?M(t,e,r):S(t),k(!1)}(i,a,c)},children:(0,h.jsx)(_t.A,{})})]})})})),Lt=(0,u.memo)((function(t){var e=t.previousStepId,r=t.condition,n=t.logicalStepId,o=(0,l.dispatch)(f.Hz).setInserterPopover;return(0,h.jsx)("div",{className:"mintmrm-automation-step__separator",children:(0,h.jsx)(bt,{onClick:function(t){return o({anchor:t,type:"condition"})},previousStepId:e,condition:r,logicalStepId:n})})})),Nt=(0,u.memo)((function(){return(0,h.jsx)("div",{className:"no-seperator"})})),Ct=(0,u.memo)((function(t){var e=t.stepIndex,r=t.step,n=(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData(),selectedStep:t(f.Hz).getSelectedStep(),dataLoader:t(f.Hz).getDataLoader(),updateClicked:t(f.Hz).getUpdateClicked()}}),[]),o=(n.automationData,n.selectedStep);return n.dataLoader,n.updateClicked,(0,h.jsxs)("div",{className:"logical-decision-box",children:[(0,h.jsx)("span",{className:"logical-text logical-no-text",children:(0,d.__)("No","mrm")}),(0,h.jsx)("span",{className:"logical-text logical-yes-text",children:(0,d.__)("Yes","mrm")}),(0,h.jsxs)("div",{className:"single-decision decision-no",children:[(0,h.jsx)(Lt,{previousStepId:e,condition:"no"}),r.node_data.no.length>0&&r.node_data.no.map((function(t,r){return(0,h.jsxs)(m.Fragment,{children:[(0,h.jsx)(Pt,{step:t,stepIndex:e,isSelected:o&&t.step_id===o.step_id,condition:"no",conditionIndex:r}),"stopAutomation"===t.key?(0,h.jsx)(Nt,{}):(0,h.jsx)(Lt,{previousStepId:e,condition:"no",logicalStepId:r})]},t.step_id)}))]}),(0,h.jsxs)("div",{className:"single-decision decision-yes",children:[(0,h.jsx)(Lt,{previousStepId:e,condition:"yes"}),r.node_data.yes.length>0&&r.node_data.yes.map((function(t,r){return(0,h.jsxs)(m.Fragment,{children:[(0,h.jsx)(Pt,{step:t,stepIndex:e,isSelected:o&&t.step_id===o.step_id,condition:"yes",conditionIndex:r}),"stopAutomation"===t.key?(0,h.jsx)(Nt,{}):(0,h.jsx)(Lt,{previousStepId:e,condition:"yes",logicalStepId:r})]},t.step_id)}))]})]})}));var At=r(1509),Et=r(9148),zt=r(4231),It=r(8845),Rt=r(5321);function Dt(t){return function(t){if(Array.isArray(t))return Ht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Tt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||Tt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){if(t){if("string"==typeof t)return Ht(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ht(t,e):void 0}}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const Ft=(0,u.memo)((function(){var t,e,r,n,o,i,a,s,c,p,v,y,g,b=window.MRM_Vars.open_ai_key,w=Vt((0,m.useState)(),2),_=w[0],j=w[1],x=Vt((0,m.useState)(),2),S=(x[0],x[1]),k=Vt((0,m.useState)(!1),2),M=k[0],O=k[1],P=Vt((0,m.useState)([]),2),L=P[0],N=P[1],C=Vt((0,m.useState)(),2),A=C[0],E=C[1],z=Vt((0,m.useState)(!1),2),I=z[0],R=z[1],D=Vt((0,m.useState)(!1),2),T=D[0],H=D[1],F=(0,l.useSelect)((function(t){return{selectedStepIndex:t(f.Hz).getSelectedStepIndex(),isShowAiModal:t(f.Hz).getOpenAIModal(),selectField:t(f.Hz).getOpenAIModalField(),selectedStep:t(f.Hz).getSelectedStep(),aiModalHeadingText:t(f.Hz).getOpenAIModalHeadingText(),promptType:t(f.Hz).getOpenAIModalPromptType(),selectedStepCondition:t(f.Hz).getSelectedStepCondition(),selectedLogicalStepIndex:t(f.Hz).getSelectedLogicalStepIndex()}}),[]),B=F.selectedStepIndex,U=F.isShowAiModal,G=F.selectField,W=(F.selectedStep,F.aiModalHeadingText),q=F.promptType,K=F.selectedStepCondition,J=F.selectedLogicalStepIndex,Y=(0,l.useDispatch)(f.Hz).setOpenAIModal,$=function(t){switch(t){case"general":O(!0);break;case"regenerate":R(!0);break;case"generate-more":H(!0)}var e={"Content-Type":"application/json",Authorization:"Bearer ".concat(null==b?void 0:b.secret_key)},r={messages:[{role:"system",content:"subject"===q?"Give me subject lines about "+_:"Give me email preview text about "+_+" within 1 sentence."}],max_tokens:1024,model:"gpt-3.5-turbo",temperature:.7,top_p:1,frequency_penalty:0,presence_penalty:0};fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:e,body:JSON.stringify(r)}).then((function(t){return t.json()})).then((function(e){if(e.error)E(e.error.message),O(!1),R(!1),H(!1);else{var r,n=e.choices[0].message.content.split("\n").filter((function(t){return""!==t.trim()}));r="generate-more"===t?[].concat(Dt(n),Dt(L)):n,N(r),O(!1),R(!1),H(!1),S(_)}})).catch((function(t){return console.error(t)}))};return(0,u.useEffect)((function(){document.querySelector(".interface-interface-skeleton__content").style.zIndex=U?"1":"0"}),[U]),(0,h.jsx)("div",{className:"mintmrm-template-modal mintmrm-openai-modal ".concat(U?"active":""),children:(0,h.jsxs)("div",{className:"template-modal-inner",children:[(0,h.jsx)("div",{className:"cross-icon",title:"Close",onClick:function(){return Y(!1,""),N([]),j(""),void E("")},children:(0,h.jsx)(_t.A,{})}),(0,h.jsx)("div",{className:"template-modal-overflow",children:(0,h.jsxs)("div",{className:"template-modal-body ".concat(L.length>0?"get-result":""),children:[L.length>0?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"openai-modal-header",children:[(0,h.jsx)(zt.A,{}),(0,h.jsx)("h4",{children:W})]})}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"welcome-title",children:[(0,h.jsx)(zt.A,{}),(0,h.jsx)("h2",{className:"title",children:W})]})}),(0,h.jsxs)("div",{className:"openai-input-wrapper",children:[(0,h.jsxs)("div",{className:"pos-relative",children:[!window.MRM_Vars.is_mailmint_pro_license_active&&(0,h.jsx)("span",{className:"pro-tag-with-icon",children:(0,h.jsx)(V.A,{})}),window.MRM_Vars.is_mailmint_pro_license_active?null!=b&&b.is_integrated?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"form-group",children:["body"!==q&&(0,h.jsx)("label",{children:window.MRM_Vars.mint_trans.WhatIsThisEmailAbout}),(0,h.jsxs)("div",{className:"pos-relative",children:[(0,h.jsx)("input",{className:"openai-input",type:"text",value:_,placeholder:"e.g. 50% off for Christmas",onChange:function(t){j(t.target.value)},onKeyDown:function(t){return function(t){"Enter"===t.key&&$("general")}(t)}}),(0,h.jsx)("span",{className:"generate-button",onClick:function(){return $("general")},children:M?(0,h.jsxs)("span",{className:"dot-wrapper",children:[(0,h.jsx)("span",{className:"dot-one"}),(0,h.jsx)("span",{className:"dot-two"}),(0,h.jsx)("span",{className:"dot-three"})]}):(0,h.jsx)(It.A,{})})]})]})}):(0,h.jsx)("a",{href:"admin.php?page=mrm-admin#/integrations",target:"_blank",className:"mintmrm-btn",children:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.ConnectOpenAI}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"pos-relative",children:[(0,h.jsx)("input",{className:"openai-input disabled",type:"text",placeholder:"e.g. 50% off for Christmas",readOnly:!0}),(0,h.jsx)("span",{className:"generate-button disabled",children:(0,h.jsx)(It.A,{})})]})})]}),(0,h.jsx)("p",{className:A?"error-message show":"error-message",children:A})]}),L.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"action-btns",children:[I||T?(0,h.jsxs)("button",{type:"button",className:"regenerate disabled ".concat(I?"regenerating":""),children:[(0,h.jsx)("p",{className:"btn-tooltip",children:(0,d.__)("Regenerate the following suggestions and update the results","mrm")}),(0,h.jsx)(Rt.A,{}),null===(e=window.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Regenerate]}):(0,h.jsxs)("button",{type:"button",className:"regenerate",onClick:function(){return $("regenerate")},children:[(0,h.jsx)("p",{className:"btn-tooltip",children:null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.RegenerateTooltip}),(0,h.jsx)(Rt.A,{}),null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.Regenerate]}),I||T?(0,h.jsxs)("button",{type:"button",className:"disabled",children:[(0,h.jsx)("p",{className:"btn-tooltip",children:null===(o=window)||void 0===o||null===(o=o.MRM_Vars)||void 0===o||null===(o=o.mint_trans)||void 0===o?void 0:o.GenerateMoreTooltip}),(0,h.jsx)(At.A,{}),T?null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.Generating:null===(a=window)||void 0===a||null===(a=a.MRM_Vars)||void 0===a||null===(a=a.mint_trans)||void 0===a?void 0:a.GenerateMore]}):(0,h.jsxs)("button",{type:"button",onClick:function(){return $("generate-more")},children:[(0,h.jsx)("p",{className:"btn-tooltip",children:null===(s=window)||void 0===s||null===(s=s.MRM_Vars)||void 0===s||null===(s=s.mint_trans)||void 0===s?void 0:s.GenerateMoreTooltip}),(0,h.jsx)(At.A,{}),null===(c=window)||void 0===c||null===(c=c.MRM_Vars)||void 0===c||null===(c=c.mint_trans)||void 0===c?void 0:c.GenerateMore]}),I||T?(0,h.jsxs)("button",{type:"button",className:"disabled",children:[(0,h.jsx)("p",{className:"btn-tooltip",children:null===(p=window)||void 0===p||null===(p=p.MRM_Vars)||void 0===p||null===(p=p.mint_trans)||void 0===p?void 0:p.ClearPromptTooltip}),(0,h.jsx)(Et.A,{}),null===(v=window)||void 0===v||null===(v=v.MRM_Vars)||void 0===v||null===(v=v.mint_trans)||void 0===v?void 0:v.ClearAll]}):(0,h.jsxs)("button",{type:"button",onClick:function(){N([]),j(""),E("")},children:[(0,h.jsx)("p",{className:"btn-tooltip",children:null===(y=window)||void 0===y||null===(y=y.MRM_Vars)||void 0===y||null===(y=y.mint_trans)||void 0===y?void 0:y.ClearPromptTooltip}),(0,h.jsx)(Et.A,{}),null===(g=window)||void 0===g||null===(g=g.MRM_Vars)||void 0===g||null===(g=g.mint_trans)||void 0===g?void 0:g.ClearAll]})]}),(0,h.jsx)("ul",{className:"open-ai-results",children:L.map((function(t){return(0,h.jsxs)("li",{className:"single-result",children:[(0,h.jsx)("span",{className:"result-icon",children:(0,h.jsx)(zt.A,{})}),(0,h.jsx)("span",{className:"result-text",children:t.replace(/^\d+\.\s+/,"")}),(0,h.jsx)("span",{className:"use-this-btn",onClick:function(e){var r,n;n=G,r=(r=t).replace(/^\d+\.\s/,""),"subject"===n&&(0,l.dispatch)(f.Hz).updateStepArgs(B,K,J,"message_data","subject",r),"preview"===n&&(0,l.dispatch)(f.Hz).updateStepArgs(B,K,J,"message_data","email_preview_text",r),"twilio_message_body"===n&&(0,l.dispatch)(f.Hz).updateStepArgs(B,K,J,"twilio_data","message_body",r),Y(!1,""),N([]),j("")},children:(0,d.__)("use","mrm")})]},t)}))})]})]})})]})})}));var Bt=[{title:"Automation Overview",videoLink:"https://www.youtube.com/embed/3uCibk4eg_k"},{title:"WooCommerce Playlist",videoLink:"https://www.youtube.com/playlist?list=PLvw5RepmoKUv59D8bXnupazBJQlPuqFSp"}];const Ut=(0,u.memo)((function(){return(0,h.jsx)("svg",{width:"26",height:"26",fill:"none",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{fill:"#02C4FB",stroke:"#02C4FB",strokeWidth:".8",d:"M24.63 12.002a17.953 17.953 0 01-4.14-2.845 54.986 54.986 0 001.414-7.33c.071-.576-.25-.762-.349-.805a.633.633 0 00-.759.252c-2.19 2.619-5.188 2.32-8.362 2.002-3.2-.32-6.5-.645-8.947 2.164a1.368 1.368 0 00-1.434-.462l-.055.015a1.367 1.367 0 00-.948 1.683L5.934 24.15a1.174 1.174 0 001.444.814l.427-.12h0a1.172 1.172 0 00.814-1.444l-1.512-5.413c2.202-2.832 5.272-2.532 8.52-2.208 3.243.324 6.594.659 9.055-2.285l.001-.002c.242-.3.342-.692.273-1.072a.588.588 0 00-.326-.42zM7.814 23.899a.369.369 0 01-.224.177l-.427.119a.373.373 0 01-.459-.259L1.821 6.461a.567.567 0 01.393-.698l.054-.015a.567.567 0 01.697.392l.044.156v0l2.501 8.95 2.339 8.37a.37.37 0 01-.035.284zm16.253-10.917c-2.189 2.619-5.188 2.32-8.361 2.002-3.162-.316-6.424-.642-8.862 2.062L4.658 9.227l-.825-2.955c2.202-2.832 5.272-2.525 8.522-2.2 3.085.308 6.271.627 8.694-1.884a53.576 53.576 0 01-1.332 6.761c-.08.288.01.596.233.794a19.1 19.1 0 004.23 2.933.598.598 0 01-.113.306z"})})})),Gt=(0,u.memo)((function(){return(0,h.jsx)("svg",{width:"14",height:"2",fill:"none",viewBox:"0 0 14 2",children:(0,h.jsx)("path",{stroke:"#A7A8B3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h12"})})})),Wt=(0,u.memo)((function(){return(0,h.jsx)("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 14 14",children:(0,h.jsx)("path",{stroke:"#A7A8B3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7.008 1v12M1 7h12"})})}));var qt=r(2017),Kt=r(9214),Jt=r(7091);function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function $t(){$t=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new N(n||[]);return o(a,"_invoke",{value:M(t,r,s)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",h={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,j=_&&_(_(C([])));j&&j!==r&&n.call(j,a)&&(w=j);var x=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Yt(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=m;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=O(s,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(e,r,n);if("normal"===c.type){if(o=n.done?v:p,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Yt(e)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},S(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(x),c(x,l,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Zt(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function Xt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zt(i,n,o,a,s,"next",t)}function s(t){Zt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var te=(0,u.createContext)(n.__unstableUseCompositeState);const ee=(0,u.memo)((function(){var t,e,r,o=(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData(),selectedStep:t(f.Hz).getSelectedStep(),dataLoader:t(f.Hz).getDataLoader(),updateClicked:t(f.Hz).getUpdateClicked(),zoomLevel:t(f.Hz).getZoomLevel(),activeAutoSave:t(f.Hz).getActivateAutoSave(),ctaProModalDisplay:t(f.Hz).getCtaProModalDisplay(),ctaProModalIcon:t(f.Hz).getCtaProModalIcon(),ctaProModalTitle:t(f.Hz).getCtaProModalTitle(),ctaProModalText:t(f.Hz).getCtaProModalText(),ctaProModalLink:t(f.Hz).getCtaProModalLink(),ctaProModalFeature:t(f.Hz).getCtaProModalFeature()}}),[]),i=o.automationData,a=o.selectedStep,s=o.dataLoader,c=o.updateClicked,d=o.zoomLevel,y=o.activeAutoSave,g=o.ctaProModalDisplay,b=o.ctaProModalIcon,w=o.ctaProModalTitle,_=o.ctaProModalText,S=o.ctaProModalLink,k=o.ctaProModalFeature;(0,u.useEffect)((function(){document.querySelector(".popover-slot").style.zIndex="block"===g?"-1":"0"}),[g]);var M,O,P=(0,l.useDispatch)(),L=(0,m.useRef)(null),N=(M=(0,u.useState)(),O=2,function(t){if(Array.isArray(t))return t}(M)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(M,O)||function(t,e){if(t){if("string"==typeof t)return Qt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qt(t,e):void 0}}(M,O)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),C=N[0],A=N[1],E=(0,l.useDispatch)(f.Hz),z=E.setAutomationAuthorID,I=E.setAutomationFullData,R=E.setDataLoader,D=E.setSaveLoader,V=E.setActivateAutoSave,T=E.setCtaProModal,H=E.setOnShowStat;(0,u.useEffect)((function(){var t=!0;z(window.MRM_Vars.current_userID);var e=window.location.hash,r="";if(e.includes("id=")&&(r=e.split("id=")[1]),A(r),r){var n=function(){var e=Xt($t().mark((function e(){var n,o;return $t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y||R(!0),y&&D(!0),e.next=4,(0,p.qy)(r);case 4:n=e.sent,t&&200===n.code&&(o=n.data.data[0],I(o),R(!1),V(!1),D(!1),H(o.showAnalyticsStat));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}else if("#/preview"===e){var o=localStorage.getItem("mint-automation-preview");if(o){var i=JSON.parse(o);I(JSON.parse(i.automationData))}R(!1)}else R(!1);return function(){t=!1}}),[C,c]),(0,u.useEffect)((function(){localStorage.getItem("mint-automation-preview")||"#/preview"!==window.location.hash||window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mrm-admin#/automations/recipe"));var t=function(){localStorage.removeItem("mint-automation-preview")};return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t),t()}}),[]);var F=(0,n.__unstableUseCompositeState)({orientation:"vertical",wrap:"horizontal",shift:!0}),B=null!==(t=null==i?void 0:i.steps)&&void 0!==t?t:[];return x.A,(0,u.useCallback)(function(){var t=Xt($t().mark((function t(e){return $t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(e,"");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[g]),(0,h.jsxs)(h.Fragment,{children:[s?(0,h.jsx)(qt.A,{type:"table-full-ten"}):(0,h.jsx)(te.Provider,{value:F,children:(0,h.jsxs)(n.__unstableComposite,{state:F,role:"tree","aria-label":null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Automation,"aria-orientation":"vertical",className:"mintmrm-automation-step",children:[(0,h.jsxs)("div",{className:"mintmrm-automation-step__wrapper",ref:L,onWheel:function(t){var e;!(e=t).ctrlKey&&!e.metaKey||e.shiftKey||(e.cancelable&&e.preventDefault(),(e.deltaY<0?1.25:.8)<1?d>.5&&P(f.Hz).zoomOut():d<2&&P(f.Hz).zoomIn())},style:{transform:"scale(".concat(d.toFixed(1),")"),transformOrigin:"top center"},children:[(0,h.jsxs)(h.Fragment,{children:[B.length>0&&"trigger"!==B[0].type&&(0,h.jsxs)(m.Fragment,{children:[(0,h.jsx)(j,{step:v.pn}),(0,h.jsx)(wt,{previousStepId:""})]}),0===B.length?(0,h.jsx)(m.Fragment,{children:(0,h.jsx)(j,{step:v.pn})}):null==B?void 0:B.map((function(t,e){return"trigger"===t.type&&(0,h.jsxs)(m.Fragment,{children:[(0,h.jsx)(Pt,{step:t,stepIndex:e,isSelected:a&&t.step_id===a.step_id}),(0,h.jsx)(wt,{previousStepId:e})]},t.step_id)}))]}),0===B.length?(0,h.jsx)(m.Fragment,{}):B.map((function(t,e){return"action"===t.type?(0,h.jsxs)(m.Fragment,{children:[(0,h.jsx)(Pt,{step:t,stepIndex:e,isSelected:a&&t.step_id===a.step_id}),"stopAutomation"===t.key?(0,h.jsx)(Nt,{}):(0,h.jsx)(wt,{previousStepId:e})]},t.step_id):"logical"===t.type&&(0,h.jsxs)(m.Fragment,{children:[(0,h.jsx)(Pt,{step:t,stepIndex:e,isSelected:a&&t.step_id===a.step_id}),(0,h.jsx)(Ct,{stepIndex:e,step:t}),(0,h.jsx)(wt,{previousStepId:e})]},t.step_id)})),(0,h.jsx)("div",{className:"mintmrm-automation-step__end",children:(0,h.jsxs)("span",{className:"",children:[(0,h.jsx)(Ut,{}),null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.Exit]})})]}),(0,h.jsx)(Ft,{}),g&&(0,h.jsx)("div",{className:"mintmrm-container",children:(0,h.jsx)(Jt.A,{icon:b,title:w,text:_,proLink:S,feature:k,setIsPro:T})}),(0,h.jsxs)("div",{className:"zooming-wrapper",children:[(0,h.jsx)("button",{className:"zoom-btn plus-btn",onClick:function(){d<2&&P(f.Hz).zoomIn()},children:(0,h.jsx)(Wt,{})}),(0,h.jsx)("button",{className:"zoom-btn minus-btn",onClick:function(){d>.5&&P(f.Hz).zoomOut()},children:(0,h.jsx)(Gt,{})})]}),(0,h.jsx)(pt,{})]})}),(0,h.jsx)(Kt.A,{showVideo:"true",videoLink:"https://www.youtube.com/embed/3uCibk4eg_k",docLink:"https://getwpfunnels.com/docs/mail-mint/automation/",automationEditor:!0,playLists:Bt})]})}));var re=r(7767),ne=r(4976),oe=r(5919);function ie(){return(0,h.jsxs)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("g",{clipPath:"url(#clip0_2082_9858)",children:(0,h.jsx)("path",{fill:"#A7A8B3",d:"M15.398 15.182a2.604 2.604 0 01-2.601-2.602V6.463c.143-3.452 5.061-3.45 5.203 0v6.117a2.604 2.604 0 01-2.602 2.602zm0-9.914c-.659 0-1.195.536-1.195 1.195v6.117c.066 1.586 2.326 1.585 2.39 0V6.463c0-.66-.535-1.195-1.195-1.195zM2.602 15.182A2.604 2.604 0 010 12.58v-1.898c.143-3.452 5.061-3.45 5.203 0v1.898a2.604 2.604 0 01-2.601 2.602zm0-5.696c-.66 0-1.196.537-1.196 1.196v1.898c.066 1.586 2.326 1.585 2.39 0v-1.898c0-.66-.535-1.196-1.194-1.196zM9 15.182a2.604 2.604 0 01-2.602-2.602V2.596c.144-3.452 5.062-3.45 5.204 0v9.984A2.604 2.604 0 019 15.182zM9 1.4c-.66 0-1.195.537-1.195 1.196v9.984c.066 1.586 2.325 1.585 2.39 0V2.596C10.195 1.936 9.66 1.4 9 1.4zm9 15.891a.703.703 0 00-.703-.703H.703c-.933.037-.932 1.37 0 1.406h16.594a.703.703 0 00.703-.703z"})}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_2082_9858",children:(0,h.jsx)("path",{fill:"#fff",d:"M0 0h18v18H0z"})})})]})}const ae=(0,m.memo)(ie);var se=r(9012),le=r(1425),ce=r(6830),ue=r(3469),de=r(9480),me=r(1455),pe=r.n(me);function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function ve(){ve=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new N(n||[]);return o(a,"_invoke",{value:M(t,r,s)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",h={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,j=_&&_(_(C([])));j&&j!==r&&n.call(j,a)&&(w=j);var x=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==fe(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=m;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=O(s,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(e,r,n);if("normal"===c.type){if(o=n.done?v:p,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fe(e)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},S(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(x),c(x,l,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function he(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function ye(t){return ge.apply(this,arguments)}function ge(){return(t=ve().mark((function t(e){var r;return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="mrm/v1/automation/get-single-automation-recipe/".concat(e),t.abrupt("return",pe()({path:r}).then((function(t){return t})).then((function(t){if(200==t.code)return t.data})));case 2:case"end":return t.stop()}}),t)})),ge=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){he(i,n,o,a,s,"next",t)}function s(t){he(i,n,o,a,s,"throw",t)}a(void 0)}))}).apply(this,arguments);var t}var be=function(){return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("svg",{fill:"none",width:"22",height:"22",viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("circle",{cx:"11",cy:"11",r:"11",fill:"#2FCF5C"}),(0,h.jsx)("path",{fill:"#fff",d:"M15.209 9.236l-1.587.396-1.983-2.471a.926.926 0 00-1.445 0L8.21 9.63l-1.618-.395a.933.933 0 00-1.124 1.124l1.093 3.842a.618.618 0 00.617.451h7.412a.618.618 0 00.618-.45l1.1-3.843a.932.932 0 00-1.1-1.124zM5.172 8.57a.772.772 0 100-1.545.772.772 0 000 1.544zm11.427 0a.772.772 0 100-1.545.772.772 0 000 1.544zm-5.714-2.626a.772.772 0 100-1.544.772.772 0 000 1.544zm3.706 10.964H7.18a.618.618 0 010-1.236h7.411a.618.618 0 110 1.236z"})]})})};const we=(0,m.memo)(be);function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function je(){je=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new N(n||[]);return o(a,"_invoke",{value:M(t,r,s)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",h={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,j=_&&_(_(C([])));j&&j!==r&&n.call(j,a)&&(w=j);var x=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==_e(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=m;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=O(s,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(e,r,n);if("normal"===c.type){if(o=n.done?v:p,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_e(e)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},S(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(x),c(x,l,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function xe(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function Se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xe(i,n,o,a,s,"next",t)}function s(t){xe(i,n,o,a,s,"throw",t)}a(void 0)}))}}function ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Me(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const Oe=(0,u.memo)((function(){var t,e,r,n,o,i,a,s,c,m,v,y,g,b,w,_,j,x,k,M,O,P,L=ke((0,u.useState)(!0),2),N=L[0],C=L[1],A=ke((0,u.useState)(!1),2),E=A[0],z=A[1],I=ke((0,u.useState)(!1),2),R=I[0],D=I[1],V=ke((0,u.useState)("success"),2),T=V[0],H=V[1],F=ke((0,u.useState)(""),2),B=F[0],U=F[1],G=ke((0,u.useState)(!1),2),W=G[0],q=G[1],K=ke((0,u.useState)(!1),2),J=K[0],Y=K[1],$=ke((0,u.useState)(!1),2),Z=$[0],X=$[1],Q=ke((0,u.useState)(!1),2),tt=Q[0],et=Q[1],rt=ke((0,u.useState)(""),2),nt=rt[0],ot=rt[1],it=ke((0,u.useState)(),2),at=it[0],st=it[1],lt=ke((0,u.useState)(!1),2),ct=lt[0],ut=lt[1],dt=(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData(),dataLoader:t(f.Hz).getDataLoader(),saveLoader:t(f.Hz).getSaveLoader(),is_save:t(f.Hz).getMaybeSave(),updateClicked:t(f.Hz).getUpdateClicked(),activateAutoSave:t(f.Hz).getActivateAutoSave(),automationName:t(f.Hz).getAutomationData().name,automationStatus:t(f.Hz).getAutomationData().status,atMostDate:t(f.Hz).getAtMostDate(),getAnalyticsStat:t(f.Hz).getAnalyticsStat()}}),[]),mt=dt.automationData,pt=dt.dataLoader,ft=dt.saveLoader,vt=dt.is_save,ht=dt.updateClicked,yt=(dt.activateAutoSave,dt.automationName),gt=dt.automationStatus,bt=(dt.atMostDate,dt.getAnalyticsStat),wt=(0,l.useDispatch)(f.Hz),_t=wt.setAutomationName,jt=wt.setAutomationStatus,xt=wt.setOnShowStat,St=wt.setMaybeSave,kt=wt.setUpdateClicked,Mt=wt.closeSidebar,Ot=wt.setSaveLoader,Pt=window.MRM_Vars.is_mailmint_pro_license_active;(0,ce.A)((function(t){vt||(t.preventDefault(),t.returnValue="")}));var Lt=(0,u.useRef)(null),Nt=(0,re.Zp)();(0,u.useEffect)((function(){Lt.current&&Lt.current.focus()}),[N]);var Ct=function(){var t=Se(je().mark((function t(e){var r,n,o;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(jt(e),St(!0),st(mt.id),Mt(),"active"===e?Ot(!0):ut(!0),mt.status=e,!mt.id){t.next=20;break}return t.next=9,(0,p.Z5)(mt,mt.id);case 9:r=t.sent,st(r.data.automation_id),H("success"),D(!0),Ot(!1),ut(!1),kt(!ht),xt(r.data.showAnalyticsStat),U("active"==e?null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.AutomationSavedMsg:r.message),t.next=31;break;case 20:return t.next=22,(0,p.Ch)(mt);case 22:o=t.sent,st(o.data.automation_id),H("success"),D(!0),U(o.message),Ot(!1),ut(!1),kt(!ht),xt(o.data.showAnalyticsStat);case 31:(0,ue.bd)(!1,D);case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(0,u.useEffect)((function(){if(at&&Nt("/id=".concat(at)),"#/preview"===window.location.hash){q(!0);var t=localStorage.getItem("mint-automation-preview");if(t){var e=JSON.parse(t);X(e.isPro),ot(e.automationDescription)}}else q(!1)}),[at]);var At=(0,u.useRef)(null);(0,oe.c7)(At,z);var Et=(0,u.useRef)(null);(0,oe.A0)(Et,C);var zt=function(){var t=Se(je().mark((function t(e){var r,n,o;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(jt(e),mt.status=e,!at){t.next=13;break}return t.next=5,(0,p.Z5)(mt,at);case 5:t.sent,H("success"),D(!0),U(null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.AutomationStatusUpdateMsg),Ot(!1),ut(!1),t.next=22;break;case 13:return t.next=15,(0,p.Ch)(mt);case 15:o=t.sent,st(o.data.automation_id),H("success"),D(!0),U(null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.AutomationStatusUpdateMsg),Ot(!1),ut(!1);case 22:(0,ue.bd)(!1,D);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),It=location.href,Rt=function(){var t=Se(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Pt||!Z){t.next=3;break}return et(!0),t.abrupt("return");case 3:Y(!0),ye(mt.id).then((function(t){null!=t&&t.automation_id&&(mt.id=null==t?void 0:t.automation_id,window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mint-mail-automation-editor#/id=").concat(null==t?void 0:t.automation_id)),q(!1),Y(!1))}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"automation-editor__header",children:pt?(0,h.jsx)(qt.A,{type:"table-full"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"automation-editor__header-left",children:[(0,h.jsx)("button",{onClick:function(){W?window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mrm-admin#/automations/recipe")):window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mrm-admin#/automations"))},on:!0,type:"button",className:"backto-list",children:(0,h.jsx)(se.A,{})}),(0,h.jsxs)("div",{ref:Et,className:"automaiton-name",children:[(0,h.jsxs)("div",{className:"tilte-area ".concat(W?"mint-justify-content-start":""),children:[N?(0,h.jsx)("h4",{className:"title",children:yt||(null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.Untitled)}):(0,h.jsx)("input",{ref:Lt,type:"text",name:"automation-name",defaultValue:yt||(0,d.__)("Untitled","mrm"),onChange:function(t){_t(t.target.value)}}),!W&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"edit-btn-area",children:N&&(0,h.jsx)("button",{type:"button",className:"edit",title:"Edit",onClick:function(){C(!1)},children:(0,h.jsx)(le.A,{})})})})]}),N&&(0,h.jsx)("div",{className:"automation-status",children:W?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("span",{className:"automation-description",children:nt})}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("span",{children:gt})})})]})]}),W?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"automation-editor__header-right",children:(0,h.jsxs)("button",{className:"mintmrm-btn",onClick:Rt,disabled:J,children:[J?null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Importing:null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.ImportRecipe,J&&(0,h.jsx)("span",{className:"mintmrm-loader"}),Z&&!window.MRM_Vars.is_mailmint_pro_license_active&&(0,h.jsx)("span",{className:"pro-tag-with-icon",children:(0,h.jsx)(we,{})})]})})}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"automation-editor__header-right",children:[0==(null==mt||null===(n=mt.steps)||void 0===n?void 0:n.length)||(null==mt||null===(o=mt.steps)||void 0===o?void 0:o.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?"":(0,h.jsx)("p",{className:"data-status autmation-issues",children:null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.AutomationStartingMsg}),"draft"!==(null==mt?void 0:mt.status)&&null!=mt&&mt.id&&(null==mt||null===(a=mt.steps)||void 0===a?void 0:a.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?(0,h.jsx)("div",{className:"mintmrm-btn automation-pause",children:(0,h.jsxs)("span",{className:"mintmrm-switcher",children:[(0,h.jsx)("input",{type:"checkbox",name:"pause",id:"automation-pause",onChange:function(t){t.target.checked?zt("active"):zt("pause")},checked:"active"===(null==mt?void 0:mt.status)}),(0,h.jsx)("label",{htmlFor:"automation-pause"}),"active"===(null==mt?void 0:mt.status)?null===(s=window)||void 0===s||null===(s=s.MRM_Vars)||void 0===s||null===(s=s.mint_trans)||void 0===s?void 0:s.Active:null===(c=window)||void 0===c||null===(c=c.MRM_Vars)||void 0===c||null===(c=c.mint_trans)||void 0===c?void 0:c.Paused]})}):"",(0,h.jsx)("div",{className:"mintmrm-btn view-analytics-stat",children:(0,h.jsxs)("span",{className:"mintmrm-switcher",children:[(0,h.jsx)("input",{type:"checkbox",name:"stat",id:"step-stat",checked:bt,onChange:function(t){return function(t){xt(t.target.checked)}(t)}}),(0,h.jsx)("label",{htmlFor:"step-stat"}),null===(m=window)||void 0===m||null===(m=m.MRM_Vars)||void 0===m||null===(m=m.mint_trans)||void 0===m?void 0:m.Stats]})}),"draft"!=gt&&void 0!==mt.id&&(0,h.jsxs)(ne.N_,{to:{pathname:"/automations/analytics/".concat(mt.id),state:{url:It}},className:"mintmrm-btn view-analytics-btn",onClick:function(){location.state=It},children:[(0,h.jsx)(ae,{}),null===(v=window)||void 0===v||null===(v=v.MRM_Vars)||void 0===v||null===(v=v.mint_trans)||void 0===v?void 0:v.Report]}),(0,h.jsxs)("div",{className:"workflow-btn-wrapper ".concat((null==mt||null===(y=mt.steps)||void 0===y?void 0:y.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?"has-dropdown":""),children:[(null==mt||null===(g=mt.steps)||void 0===g?void 0:g.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?(0,h.jsxs)("button",{type:"button",className:"mintmrm-btn start-workflow",onClick:function(){return Ct("active")},disabled:!(!ft&&!ct),children:[!ct&&"active"!==gt&&(null===(b=window)||void 0===b||null===(b=b.MRM_Vars)||void 0===b||null===(b=b.mint_trans)||void 0===b?void 0:b.StartWorkflow),!ct&&"active"===gt&&""!=at&&(null===(w=window)||void 0===w||null===(w=w.MRM_Vars)||void 0===w||null===(w=w.mint_trans)||void 0===w?void 0:w.UpdateWorkflow),ct&&"active"!==gt&&(null===(_=window)||void 0===_||null===(_=_.MRM_Vars)||void 0===_||null===(_=_.mint_trans)||void 0===_?void 0:_.SavingAsDraft),ft&&(0,h.jsx)("span",{className:"mintmrm-loader"})]}):(0,h.jsx)("button",{type:"button",className:"mintmrm-btn start-workflow",disabled:!0,children:null===(j=window)||void 0===j||null===(j=j.MRM_Vars)||void 0===j||null===(j=j.mint_trans)||void 0===j?void 0:j.StartWorkflow}),(null==mt||null===(x=mt.steps)||void 0===x?void 0:x.length)>0&&""!==(null==mt?void 0:mt.trigger_name)&&(0,h.jsxs)("div",{className:"workflow-dropdown-btn",onClick:function(){return z(!E)},ref:At,children:[(0,h.jsx)("span",{className:"icon",children:(0,h.jsx)("svg",{width:"10",height:"6",fill:"none",viewBox:"0 0 10 6",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5L5 1 1 5"})})}),(0,h.jsxs)("ul",{className:"mintmrm-dropdown ".concat(E?"show":""),children:[(0,h.jsx)("li",{onClick:function(){return Ct("active")},children:(0,h.jsxs)("span",{children:[!ct&&"active"!==gt&&(null===(k=window)||void 0===k||null===(k=k.MRM_Vars)||void 0===k||null===(k=k.mint_trans)||void 0===k?void 0:k.StartWorkflow),!ct&&"active"===gt&&""!=at&&(null===(M=window)||void 0===M||null===(M=M.MRM_Vars)||void 0===M||null===(M=M.mint_trans)||void 0===M?void 0:M.UpdateWorkflow),ct&&"active"!==gt&&(null===(O=window)||void 0===O||null===(O=O.MRM_Vars)||void 0===O||null===(O=O.mint_trans)||void 0===O?void 0:O.SavingAsDraft)]})}),(0,h.jsx)("li",{onClick:function(){return Ct("draft")},children:(0,h.jsx)("span",{children:null===(P=window)||void 0===P||null===(P=P.MRM_Vars)||void 0===P||null===(P=P.mint_trans)||void 0===P?void 0:P.SaveAsDraft})})]})]})]}),R&&(0,h.jsx)(de.A,{setShowNotification:D,message:B,notificationType:T,setNotificationType:H})]})})]})}),tt&&(0,h.jsx)("div",{className:"mintmrm-container",children:(0,h.jsx)(Jt.A,{setIsPro:et,proLink:S._M})})]})}));function Pe(){var t=(0,l.useSelect)((function(t){return{isSidebarOpened:t(f.Hz).isSidebarOpened,selectedStep:t(f.Hz).getSelectedStep}})),e=t.isSidebarOpened,r=t.selectedStep,n=(0,l.useDispatch)(f.Hz),o=n.openSidebar,a=n.closeSidebar,s=n.toggleFeature,c=(0,l.useDispatch)(i.store).registerShortcut;return(0,u.useEffect)((function(){c({name:"mintmail/automation-editor/toggle-fullscreen",category:"global",description:(0,d.__)("Toggle fullscreen mode.","mrm"),keyCombination:{modifier:"secondary",character:"f"}}),c({name:"mintmail/automation-editor/toggle-sidebar",category:"global",description:(0,d.__)("Show or hide the settings sidebar.","mrm"),keyCombination:{modifier:"primaryShift",character:","}})}),[c]),(0,i.useShortcut)("mintmail/automation-editor/toggle-fullscreen",(function(){s("fullscreenMode")})),(0,i.useShortcut)("mintmail/automation-editor/toggle-sidebar",(function(t){if(t.preventDefault(),e())a();else{var n=r()?f.gl:f.Rs;o(n)}})),null}var Le=r(5573);const Ne=(0,m.createElement)(Le.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,m.createElement)(Le.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));function Ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ae(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ee(){var t,e=Ce((0,m.useState)(!0),2),r=(e[0],e[1],Ce((0,m.useState)(!0),2));return r[0],r[1],(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData()}}),[]).automationData,(0,h.jsx)(n.PanelBody,{children:(0,h.jsx)("div",{className:"no-step-selected",children:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.NoStepSelected})})}function ze(){var t,e,r=(0,l.useSelect)((function(t){return{selectedStep:t(f.Hz).getSelectedStep(),selectedStepType:t(f.Hz).getSelectedStepType()}}),[]),o=r.selectedStep,i=r.selectedStepType;if(!o)return(0,h.jsx)(n.PanelBody,{children:(0,h.jsx)("div",{className:"no-step-selected",children:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.NoStepSelected})});if(!i)return(0,h.jsx)(n.PanelBody,{children:(0,h.jsx)("div",{className:"no-step-selected",children:null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.UnknownStepType})});var a=i.edit;return(0,h.jsxs)("div",{className:"block-editor-block-inspector",children:[(0,h.jsx)(a,{},o.id),null!=i&&i.help?(0,h.jsx)(Kt.A,{showVideo:i.help.showVideo,videoLink:i.help.videoLink,docLink:i.help.docLink}):null]})}function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}var Re=["className"];function De(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?De(Object(r),!0).forEach((function(e){Te(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Te(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ie(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var He=u.Platform.select({web:!1,native:!1});function Fe(t){var e,r=t.className,n=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,Re),a=(0,l.useSelect)((function(t){var e;return{keyboardShortcut:t(i.store).getShortcutRepresentation("mintmail/automation-editor/toggle-sidebar"),sidebarKey:null!==(e=t(o.M_).getActiveComplementaryArea(f.Hz))&&void 0!==e?e:f.Rs,selectedStep:t(f.Hz).getSelectedStep()}}),[]),s=(a.keyboardShortcut,a.sidebarKey),c=(a.showIconLabels,a.automationName,a.selectedStep);return(0,h.jsxs)(o.WK,Ve(Ve({identifier:s,panelClassName:r,closeLabel:(0,d.__)(" ","mrm"),headerClassName:"edit-site-sidebar__panel-tabs",title:null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Settings,icon:Ne,className:"\n                    edit-site-sidebar mintmrm-automation-sidebar \n                    ".concat("condition"===(null==c?void 0:c.key)||"pabblyConnectSendData"===(null==c?void 0:c.key)?"conditional-step-sidebar":""," \n                    ").concat("mint_anniversary_reminder"===(null==c?void 0:c.key)?"anniversary-step-sidebar":""," \n                    ").concat("bricks_form_submit"===(null==c?void 0:c.key)?"bricks-step-sidebar":"","\n                    ").concat("webHookOutgoing"===(null==c?void 0:c.key)?"webhook-step-sidebar":"","\n                "),scope:f.Hz,isActiveByDefault:He},n),{},{children:[s===f.Rs&&(0,h.jsx)(Ee,{}),s===f.gl&&(0,h.jsx)(ze,{})]}))}const Be=function(t){t.children,(0,c.G)("mrm-admin","automations");var e=(0,l.useSelect)((function(t){return{isSidebarOpened:t(f.Hz).isSidebarOpened(),dataLoader:t(f.Hz).getDataLoader()}}),[]),r=e.isSidebarOpened,a=(e.dataLoader,s()("interface-interface-skeleton mintmrm-automation-editor mintmrm-page",{"is-sidebar-opened":r,"show-icon-labels":!0}));return(0,h.jsx)(i.ShortcutProvider,{children:(0,h.jsxs)(n.SlotFillProvider,{children:[(0,h.jsx)(o.fA,{isActive:!1}),(0,h.jsx)(Pe,{}),(0,h.jsx)(Fe,{}),(0,h.jsx)(o.Du,{className:a,header:(0,h.jsx)(Oe,{}),content:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(ee,{})}),sidebar:(0,h.jsx)(o.WK.Slot,{scope:f.Hz})}),(0,h.jsx)(n.Popover.Slot,{})]})})}},4504:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(4848);function o(){return(0,n.jsxs)("svg",{width:"114",height:"96",fill:"none",viewBox:"0 0 114 96",children:[(0,n.jsx)("circle",{cx:"66",cy:"48",r:"48",fill:"#4CBB17",fillOpacity:".1"}),(0,n.jsx)("path",{fill:"#573BFF",fillRule:"evenodd",d:"M32 71.935C24.425 70.767 23.343 67.41 21.937 57c-.983 9.876-2.235 13.621-9.937 14.747 6.717 2.816 9.079 3.838 10.279 15.253C23.933 75.44 25.407 74.417 32 71.935z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#4CBB17",fillRule:"evenodd",d:"M11.81 47.951c-4.474-.7-5.113-2.712-5.943-8.951-.58 5.92-1.32 8.164-5.867 8.839 3.967 1.687 5.361 2.3 6.069 9.142.977-6.93 1.848-7.542 5.74-9.03z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#573BFF",fillRule:"evenodd",d:"M114 26.961c-4.545-.7-5.194-2.716-6.038-8.961-.59 5.926-1.341 8.173-5.962 8.848 4.03 1.69 5.447 2.303 6.167 9.152.993-6.936 1.877-7.55 5.833-9.039z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#4CBB17",fillRule:"evenodd",d:"M108.809 74.951c-4.473-.7-5.112-2.712-5.942-8.951-.579 5.92-1.319 8.164-5.867 8.838 3.967 1.688 5.361 2.301 6.069 9.143.977-6.93 1.848-7.542 5.74-9.03z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#4CBB17",d:"M71.917 41.583h-12.5v-4.166a6.257 6.257 0 016.25-6.25c2.913 0 5.628 2.014 6.316 4.685a2.084 2.084 0 104.034-1.037C74.852 30.287 70.5 27 65.667 27A10.43 10.43 0 0055.25 37.417v5.05A10.423 10.423 0 0049 52v6.25a10.43 10.43 0 0010.417 10.417h12.5A10.43 10.43 0 0082.333 58.25V52a10.43 10.43 0 00-10.416-10.417zm6.25 16.667a6.257 6.257 0 01-6.25 6.25h-12.5a6.257 6.257 0 01-6.25-6.25V52a6.257 6.257 0 016.25-6.25h12.5a6.257 6.257 0 016.25 6.25v6.25zM67.75 54.083v2.084a2.083 2.083 0 01-4.167 0v-2.084a2.083 2.083 0 014.167 0z"})]})}},7091:(t,e,r)=>{r.d(e,{A:()=>l});var n=r(1609),o=(r(4983),r(365),r(4504)),i=(r(7723),r(8534)),a=r(4848);function s(t){var e=t.setIsPro,r=(void 0===(void 0===(void 0===(t.proLink,t.icon)&&o.A,t.title)&&window.MRM_Vars.mint_trans.UnlockWithPremium,t.feature,t.text)&&window.MRM_Vars.mint_trans.GetInstantAccessToExclusiveFeaturesWithTheProVersion,t.onProShow),n=t.emailBuilder,s=void 0!==n&&n;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.A,{setIsOpen:function(){s?r(!1):e(!1,"")}})})}const l=(0,n.memo)(s)},5699:(t,e,r)=>{function n(t,e){var r=document.querySelector("#adminmenu");Array.from(r.getElementsByClassName("current")).forEach((function(t){t.classList.remove("current")})),Array.from(r.querySelectorAll(".wp-has-current-submenu")).forEach((function(t){t.classList.remove("wp-has-current-submenu"),t.classList.remove("wp-menu-open"),t.classList.remove("selected"),t.classList.add("wp-not-current-submenu"),t.classList.add("menu-top")}));var n="/"===e?"admin.php?page=mrm-admin":"admin.php?page=mrm-admin#/"+e,o="/"===e?'li > a[href$="'.concat(n,'"], li > a[href*="').concat(n,'?"]'):'li > a[href*="'.concat(n,'"]'),i=r.querySelectorAll(o);if(Array.from(i).forEach((function(t){t.parentElement.classList.add("current")})),t){var a=r.querySelector("#toplevel_page_mrm-admin");a&&(a.classList.remove("wp-not-current-submenu"),a.classList.add("wp-has-current-submenu"),a.classList.add("wp-menu-open"),a.classList.add("current"))}document.querySelector("#wpwrap").classList.remove("wp-responsive-open")}r.d(e,{G:()=>n})}}]);
//# sourceMappingURL=automation-editor.min.js.map?ver=1729828711084000